@using PagedList.Mvc;
@using PagedList;
@model PagedList.PagedList<JN.Data.MachineOrder>
@{
    Layout = "~/Areas/AdminCenter/Views/Shared/_Layout.cshtml";
    //var beisu = MvcCore.Unity.Get<JN.Data.Service.ISysParamService>().Single(x => x.ID == 1902).Value.ToDecimal();
}
<!-- Content -->
<div id="content">
    <!-- Breadcrumb -->
    <ul class="breadcrumb">
        <li><a href="@Url.Action("Index", "Home")" class="glyphicons home"><i></i> 首页</a></li>
        <li class="divider"></li>
        <li>@ViewBag.Title</li>
    </ul>
    <div class="separator bottom"></div>
    <!-- // Breadcrumb END -->
    <div class="innerLR">

        <div class="tabbable">
            <ul class="nav nav-tabs" id="myTab">
                <li class="@(String.IsNullOrEmpty(Request["isbalance"]) ? "active" : "")">
                    <a href="@Url.Action("MachineOrder")">
                        所有矿机
                    </a>
                </li>
                <li class="@(Request["isbalance"] == "1" ? "active" : "")">
                    <a href="?isbalance=1">
                        分红中的矿机
                    </a>
                </li>
                <li class="@(Request["isbalance"] == "0" ? "active" : "")">
                    <a href="?isbalance=0">
                        已出局的矿机
                    </a>
                </li>
                @*<li class="@(Request["status"] == "0" ? "active" : "")">
                        <a href="?status=0">
                            未充值的充值
                        </a>
                    </li>*@
                @*<li class="@(Request["status"] == "1" ? "active" : "")">
                        <a href="?status=1">
                            待确认的充值
                        </a>
                    </li>
                    <li class="@(Request["status"] == "2" ? "active" : "")">
                        <a href="?status=2">
                            已完成的充值
                        </a>
                    </li>
                    <li class="@(Request["status"] == "-1" ? "active" : "")">
                        <a href="?status=-1">
                            充值失败记录
                        </a>
                    </li>*@
            </ul>
            <div class="filter-bar margin-bottom-none">
                <form method="get">

                    <!-- Filter -->
                    <div>
                        <select name="datefiled" style="width: 80px;">
                            <option value="CreateTime" @(Request["datefiled"] == "CreateTime" ? "selected" : "")>创建时间</option>
                        </select>
                    </div>
                    <div>
                        <label>从:</label>
                        <div class="input-append">
                            <input type="text" name="dateform" class="input-mini datepicker" value="@Request["dateform"]" style="width: 63px;" />
                            <span class="add-on glyphicons calendar"><i></i></span>
                        </div>
                    </div>
                    <!-- // Filter END -->
                    <!-- Filter -->
                    <div>
                        <label>到:</label>
                        <div class="input-append">
                            <input type="text" name="dateto" class="input-mini datepicker" value="@Request["dateto"]" style="width: 63px;" />
                            <span class="add-on glyphicons calendar"><i></i></span>
                        </div>
                    </div>
                    <!-- // Filter END -->
                    <!-- Filter -->
                    <div style="margin-left:10px">
                        <select name="numberfiled" style="width: 80px;">
                            <option value="RechargeAmount" @(Request["numberfiled"] == "ChangeMoney" ? "selected" : "")>金额</option>
                        </select>
                    </div>
                    <div>
                        <label>从:</label>
                        <div class="input-append">
                            <input type="text" name="numberform" class="input-mini" style="width: 30px;" value="@Request["numberform"]" />
                            <span class="add-on glyphicons euro"><i></i></span>
                        </div>
                    </div>
                    <!-- // Filter END -->
                    <!-- Filter -->
                    <div>
                        <label>到:</label>
                        <div class="input-append">
                            <input type="text" name="numberto" class="input-mini" style="width: 30px;" value="@Request["numberto"]" />
                            <span class="add-on glyphicons euro"><i></i></span>
                        </div>
                    </div>
                    <!-- // Filter END -->
                    <!-- Filter -->
                    <div style="margin-left:10px">
                        <select name="keyfiled" style="width: 80px;">
                            <option value="UserName" @(Request["keyfiled"] == "UserName" ? "selected" : "")>会员编号</option>
                            @*<option value="Remark" @(Request["keyfiled"] == "Remark" ? "selected" : "")>描述</option>*@
                        </select>
                    </div>
                    <div>
                        <div class="input-append">
                            <input type="text" name="keyword" class="input-mini" style="width: 150px;" value="@Request["keyword"]" placeholder="请输入查询关键词" />
                            <span style="margin: 0;" class="btn-action single glyphicons circle_question_mark" data-toggle="tooltip" data-placement="top" data-original-title="使用模糊查询可在关键字前后加上“%”"><i></i></span>
                        </div>
                    </div>
                    <!-- // Filter END -->
                    <!-- Filter -->
                    <div>
                        <input type="hidden" name="IsAsc" value="0" />
                        <input type="hidden" name="OrderFiled" value="ID" />
                        <input type="submit" value="查询" />
                        <input type="button" onclick="location.href='@(Request.Url.PathAndQuery.Replace(ViewContext.RouteData.Values["action"].ToString(), ViewContext.RouteData.Values["action"].ToString() +"Export"))'" value="导出" />

                    </div>
                    <div class="clearfix"></div>
                    <!-- // Filter END -->

                </form>

            </div>

            <table id="sample-table-1" class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th class="center">
                        </th>
                        <th>流水号</th>
                        <th>会员</th>
                        <th>矿机类型</th>
                        @*<th>付款银行</th>*@
                        @*<th>银行卡号</th>*@
                        @*<th>支付宝</th>*@
                        @*<th>微信</th>*@
                        <th>算力数量</th>
                        <th>价格</th>
                        <th>总量</th>
                        <th>购买方式</th>
                        <th>每天可收益</th>
                        <th>收益时长</th>
                        <th>已使用天数</th>
                        <th>激活次数</th>
                        @*<th>矿机数量</th>*@
                        @*<th>购买算力</th>*@
                        <th>累计收益</th>
                        @*<th>封顶收益</th>
        <th>今日挖矿时长</th>*@
                        <th>状态</th>
                        <th>
                            <i class="icon-time bigger-110 hidden-480"></i>
                            时间
                        </th>
                        @*<th>操作</th>*@
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Count > 0)
                    {
                        decimal TopBonus = 0;
                        int i = 0;
                        foreach (var item in Model)
                        {
                    <tr>
                        <td class="center text-muted">
                            @(i = i + 1)
                        </td>
                        <td>
                            @item.InvestmentNo
                        </td>
                        <td>
                            @item.UserName
                        </td>
                        <td>
                            @item.ProductName
                        </td>
                        @*<td>
            @Model[i].BankName
        </td>
        <td>
            @Model[i].BankCard
        </td>*@
                        <td>
                            @item.HashnestNum
                        </td>
                        <td>
                            @item.SettlementMoney
                        </td>
                        <td>
                            @item.ApplyInvestment
                        </td>
                        <td>
                            @item.PayWay
                        </td>
                        <td>
                            @(item.HashnestNum * item.TimesType)
                        </td>
                        <td>
                            @(item.Duration)
                        </td>
                        <td>
                            @(item.ReserveInt1 ?? 0)
                        </td>
                        <td>
                            @(item.ActivationNums>1 ? (item.ActivationNums-1) : 0)
                        </td>
                        @*<td>
            @item.BuyNum
        </td>*@
                        @*<td>
            @(string.IsNullOrEmpty(item.HashnestName)?"未购买": item.HashnestName)
        </td>*@
                        @*<td>
            @Model[i].RechargeAmount.ToString("F2")
        </td>*@
                        @*<td>
            <a href="@Model[i].ImgUrl" target="_blank"><img src="@Model[i].ImgUrl" style="width:50px;height:50px;" /></a>
        </td>*@
                        @*<td>
            @Model[i].Rate
        </td>*@
                        <td>
                            @item.AddupInterest
                        </td>
                        @*<td>
            @TopBonus
        </td>*@
                        @*<td>
            @item.TopBonus
        </td>
        <td>
            @item.TodayMiningTime
        </td>*@
                        <td class="hidden-480">@(item.IsBalance ? "分红中" : "已出局")</td>
                        <td>
                            @item.CreateTime.ToString("yyyy-MM-dd HH:mm:ss")
                        </td>
                        @*<td>
            @if (item.IsBalance)
            {
                <a href="@(Url.Action("ModifyCommand", new {ID = item.ID}))" class="btn-action glyphicons edit btn-info" data-rel="tooltip" title="编辑">
                    <i></i>
                </a>
                <a href="@(Url.Action("MachineCommand", new { ID = item.ID, commandtype = "doout" }))" class="btn btn-xs btn-success" data-rel="tooltip" title="不可分红">
                        <i class="icon-lock bigger-120"></i>
                    </a>
                <a href="@(Url.Action("RemittanceCommand", new { ID = Model[i].ID, commandtype = "dopass" }))" class="btn btn-xs btn-success" data-rel="tooltip" title="审核充值">
                        <i class="icon-ok bigger-120"></i>
                    </a>
                <a href="###" data-value="@Model[i].ID" class="btn btn-xs btn-danger qstx" data-rel="tooltip" title="删除" data-placement="top">
                        <i class="icon-trash bigger-120"></i>
                    </a>
            }
        </td>*@

                    </tr>
                        }
                    }
                    else
                    {
                        <tr><td colspan="12" align="center" style="color:#999; line-height:50px">很抱歉，没有任何记录。</td></tr>
                    }
                </tbody>
            </table>


            <div class="separator top form-inline small">

                <!-- Pagination -->
                @Html.PagedListPager((IPagedList)Model, page => Url.Action(ViewContext.RouteData.Values["action"].ToString(),
                       JN.Services.Tool.StringHelp.GetQueryString(HttpUtility.ParseQueryString(Request.Url.Query), page)), new PagedListRenderOptions() { ContainerDivClasses = new string[] { "pagination pagination-small pull-right" } })


                <div class="clearfix"></div>
                <!-- // Pagination END -->
                @*<span style="color:#f00">
                        *注意：状态为“待确认”的充值单表示无法确定会员是否已成功支付，有可能是会员提交充值并未实际支付，一般不需要处理。<br />
                        当会员提出异议时，说明有可能会员已支付但平台未接收到成功调用，支付成功后即便状态未实时更新，支付宝平台仍在几个小时内有多次反馈请求，此时平台充值状态仍会更新。<br />
                        24小时后还未到帐此时应该到支付宝平台去核实支付流水，并给会员补币。
                    </span>*@
            </div><!-- /.table-responsive -->
        </div><!-- /span -->
    </div><!-- /row -->
</div><!-- /.page-content -->
@section scripts{
    @*<script type="text/javascript">
        jQuery(function ($) {
            $(".qstx").on("click", function () {
                var id = $(this).attr("data-value");
                bootbox.confirm('您确定要删除该记录吗?', function (result) {
                    if (result) {
                        location = '@Url.Action("RemittanceDelete")/' + id;
                    }
                });
            });
        })
        </script>*@
}