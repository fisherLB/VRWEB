
@{
    ViewBag.Title = "Bill";
    Layout = "~/Areas/APP/Views/Shared/_Layout18080102.cshtml";
}
<link href="/Theme/App/css/user.css" rel="stylesheet">
<header class="header">
    <div class="header-return mui-action-back">
        @*<a href="/APP/User/Personal"></a>*@
    </div>
    <div class="logo">@T("账单")</div>
</header>
<section class="container">
    <ul class="wode_list">
        <li class="on" id="ine1"><a>@T("兑商")</a></li>
        <li class="" id="ine2"><a>@T("买商")</a></li>
    </ul>
    <div class="tab-content padding0" id="tab-buy">
        <ul class="table-view" id="buybox">
            @*<li>
                    <a href="/APP/Finance/Details2">
                        <img src="~/Theme/APP/images/Logo.png" />
                        <div class="media-body c00d2ff">
                            @T("商务钱包提现")
                            <p class="mui-ellipsis">2018-08-18 18:25</p>
                        </div>
                        <div class="right-number cf40">1000</div>
                    </a>
                </li>
                <li>
                    <a href="/APP/Finance/Details2">
                        <img src="~/Theme/APP/images/Logo.png" />
                        <div class="media-body c00d2ff">
                            @T("商务钱包提现")
                            <p class="mui-ellipsis">2018-08-18 18:25</p>
                        </div>
                        <div class="right-number cf40">1000</div>
                    </a>
                </li>*@
        </ul>
    </div>
    <div class="tab-content padding0" id="tab-sell">
        <ul class="table-view" id="sellbox">
            @*<li>
                <a href="/APP/Finance/Details2">
                    <img src="~/Theme/APP/images/Logo.png" />
                    <div class="media-body c00d2ff">
                        @T("商务钱充值")
                        <p class="mui-ellipsis">2018-08-18 18:25</p>
                    </div>
                    <div class="right-number c00d2ff">1000</div>
                </a>
            </li>
            <li>
                <a href="/APP/Finance/Details2">
                    <img src="~/Theme/APP/images/Logo.png" />
                    <div class="media-body c00d2ff">
                        @T("商务钱充值") FJC
                        <p class="mui-ellipsis">2018-08-18 18:25</p>
                    </div>
                    <div class="right-number c00d2ff">1000</div>
                </a>
            </li>
            <li>
                <a href="/APP/Finance/Details2">
                    <img src="~/Theme/APP/images/Logo.png" />
                    <div class="media-body c00d2ff">
                        @T("商务钱充值") FJC
                        <p class="mui-ellipsis">2018-08-18 18:25</p>
                    </div>
                    <div class="right-number c00d2ff">100</div>
                </a>
            </li>*@
        </ul>
    </div>
</section>
<script src="~/Theme/APP/js/jquery-1.10.2.js"></script>
<script>
    $(function () {
        $('#ine1').click(function () {
            $('#tab-buy').show();
            $('#tab-sell').hide();
            $('#tab-ing').hide();
            $('#tab-over').hide();
        })
        $('#ine2').click(function () {
            $('#tab-buy').hide();
            $('#tab-sell').show();
            $('#tab-ing').hide();
            $('#tab-over').hide();
        })
        $('#ine3').click(function () {
            $('#tab-buy').hide();
            $('#tab-sell').hide();
            $('#tab-ing').show();
            $('#tab-over').hide();
        })
        $('#ine4').click(function () {
            $('#tab-buy').hide();
            $('#tab-sell').hide();
            $('#tab-ing').hide();
            $('#tab-over').show();
        })

        $(".wode_list li").click(function () {
            $(this).addClass("on").siblings().removeClass("on");

        })
    });
</script>

<script>
    layui.use('flow', function () {
        //var $ = layui.jquery; //不用额外加载jQuery，flow模块本身是有依赖jQuery的，直接用即可。
        var flow = layui.flow;
        flow.load({
            elem: '#buybox', //指定列表容器
            isAuto: false,//是否自动加载
            done: function (page, next) { //到达临界点（默认滚动触发），触发下一页
                var lis = [];
                //以jQuery的Ajax请求为例，请求下一页数据（注意：page是从2开始返回）
                $.get('@Url.Action("getCashList")?page=' + page, function (res) {
                    var strhtml = "";
                    //假设你的列表返回在data集合中
                    layui.each(res.data, function (index, item) {
                        strhtml = '<li>';
                        strhtml += '<a href="/APP/Finance/Details2?id=' + item.ID + '">';
                        strhtml += '<img src="/Theme/APP/images/Logo.png" />';
                        strhtml += '<div class="media-body c00d2ff">';
                        strhtml += '@T("商务钱包提现")';
                        strhtml += '<p class="mui-ellipsis">' + getTime(item.CreateTime) + '</p>';
                        strhtml += '</div>';
                        strhtml += '<div class="right-number cf40">' + item.DrawMoney + '</div>';
                        strhtml += '</a>';
                        strhtml += '</li>';
                        strhtml += '</div>';
                        strhtml += '</div>';
                        lis.push(strhtml);
                    });
                    //alert(lis);
                    //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                    next(lis.join(''), page < res.pages);
                });
            }
        });

        flow.load({
            elem: '#sellbox', //指定列表容器
            isAuto: false,//是否自动加载
            //end: ' ',
            done: function (page, next) { //到达临界点（默认滚动触发），触发下一页
                var lis = [];
                //以jQuery的Ajax请求为例，请求下一页数据（注意：page是从2开始返回）
                $.get('@Url.Action("getRemittanceList")?page=' + page, function (res) {
                    var strhtml = "";
                    if (res.data.length > 0) {
                        //假设你的列表返回在data集合中
                        layui.each(res.data, function (index, item) {
                            strhtml = '<li>';
                            strhtml += '<a href="/APP/Finance/Details3?id=' + item.ID + '">';
                            strhtml += '<img src="/Theme/APP/images/Logo.png" />';
                            strhtml += '<div class="media-body c00d2ff">';
                            strhtml += '@T("线下充值")';
                            strhtml += '<p class="mui-ellipsis">' + getTime(item.CreateTime) + '</p>';
                            strhtml += '</div>';
                            strhtml += '<div class="right-number c00d2ff">' + item.RechargeAmount + '</div>';
                            strhtml += '</a>';
                            strhtml += '</li>';
                            strhtml += '</div>';
                            strhtml += '</div>';
                            //lis.push(strhtml);
                        });
                    }
                    @*else {
                        strhtml += '<div class="load-no-more"><span>@T("没有更多了")</span></div>';
                    }*@
                    lis.push(strhtml);
                    //alert(lis);
                    //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                    next(lis.join(''), page < res.pages);
                });
            }
        });

        var getTime = function (value) {
            var date = new Date(parseInt(value.replace("/Date(", "").replace(")/", ""), 10));
            var month = date.getMonth() + 1 < 10 ? "0" + (date.getMonth() + 1) : date.getMonth() + 1;
            var day = date.getDate() < 10 ? "0" + date.getDate() : date.getDate();
            var hour = date.getHours() < 10 ? "0" + date.getHours() : date.getHours();
            var minutes = date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes();
            var sec = date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds();
            return date.getFullYear() + "/" + month + "/" + day + " " + hour + ":" + minutes + ":" + sec;
        }

    });

</script>
